{"ast":null,"code":"var _jsxFileName = \"/Users/ahmadomar/stocks/frontend/src/components/stockGraph.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport axios from 'axios';\nimport useDebounce from './../hooks/useDebounce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StockGraph = () => {\n  _s();\n  const [stock, setStock] = useState('ANF'); // Stock symbol\n  const debouncedStock = useDebounce(stock, 500);\n  const [startDate, setStartDate] = useState('2024-10-15'); // Default start date\n  // const [startDate, setStartDate] = useState('1900-01-01'); // Default start date\n  const [endDate, setEndDate] = useState('2024-10-16'); // Default end date\n  const [profit, setProfit] = useState(null);\n  const [purchaseAmount, setPurchaseAmount] = useState(100); // Default purchase amount\n  const [stockData, setStockData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [earliestDate, setEarliestDate] = useState('');\n  const today = new Date().toISOString().split('T')[0]; // Get today's date in YYYY-MM-DD format\n\n  const [formattedStockData, setFormattedStockData] = useState('');\n  const svgRef = useRef(); // Ref for the SVG element\n\n  useEffect(() => {\n    setFormattedStockData(JSON.stringify(stockData, null, 2)); // 2 spaces for pretty printing\n  }, [stockData]);\n\n  // useEffect(() => {\n  //     calculateProfit();\n  // }, [purchaseAmount]);\n\n  useEffect(() => {\n    fetchEarliestDate();\n  }, [debouncedStock]);\n  useEffect(() => {\n    if (debouncedStock && startDate && endDate) {\n      fetchStockData();\n    }\n  }, [debouncedStock, startDate, endDate, purchaseAmount]);\n  useEffect(() => {\n    if (stockData.length) {\n      drawGraph(); // Call function to draw the graph\n    }\n  }, [stockData]);\n  function formatDateString(dateString) {\n    const match = dateString.match(/^(\\d{4}-\\d{2}-\\d{2})/);\n    return match ? match[1] : ''; // Return the matched date or null if no match\n  }\n  const fetchStockData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const url = `http://localhost:5000/api/stocks?stock=${debouncedStock}&startDate=${startDate}&endDate=${endDate}`;\n      const response = await fetch(url);\n      if (!response.ok) throw new Error('Network response was not ok');\n      const result = await response.json();\n      // Combine dates and prices\n      const formattedStockData = result.map(item => {\n        var price = (item === null || item === void 0 ? void 0 : item.price) == null ? previousPrice : item.price;\n        var data = {\n          date: new Date(item.timestamp * 1000),\n          price\n        };\n        var previousPrice = price;\n      });\n      setStockData(formattedStockData);\n      calculateProfit(formattedStockData); // Calculate profit based on new data\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const findClosestDataPoint = (stockData, dateAtMouse) => {\n    var left = 0;\n    var right = stockData.length - 1;\n    while (left < right) {\n      var mid = Math.floor((right + left) / 2);\n      var midDate = stockData[mid].date;\n      if (midDate.getTime() == dateAtMouse.getTime()) break;\n      if (midDate < dateAtMouse) {\n        left = mid + 1;\n      } else {\n        right = mid - 1;\n      }\n    }\n    return stockData[mid];\n  };\n  const drawGraph = () => {\n    // Set dimensions and margins for the graph\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 40,\n      left: 40\n    };\n    const width = 800 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Clear any previous SVG\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    // Create an SVG element\n    const svg = d3.select(svgRef.current).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n\n    // Add an invisible rect for capturing mousemove events\n    svg.append('rect').attr('width', width).attr('height', height).style('fill', 'none').style('pointer-events', 'all'); // Ensures it can capture mouse events\n    // .on('mousemove', handleMousemove); // Attach your mousemove handler here\n\n    // Set the scales\n    const x = d3.scaleTime().domain(d3.extent(stockData, d => d.date)).range([0, width]);\n    const y = d3.scaleLinear().domain([0, d3.max(stockData, d => d.price)]).range([height, 0]);\n\n    // Add the axes\n    svg.append('g').attr('class', 'x-axis').attr('transform', `translate(0,${height})`).call(d3.axisBottom(x));\n    // .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\")));\n\n    svg.append('g').attr('class', 'y-axis').call(d3.axisLeft(y));\n\n    // Draw the line\n    const line = d3.line().x(d => x(d.date)).y(d => y(d.price));\n    svg.append('path').datum(stockData).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-width', 1.5).attr('d', line);\n    const trackerLine = svg.append('line').attr('stroke', 'steelblue').attr('stroke-width', 1).attr(\"y1\", 0).attr(\"y2\", height).style(\"opacity\", 1);\n\n    // Append a circle to your SVG for the tracker ball\n    const ball = svg.append('circle').attr('r', 5) // Radius of the ball\n    .attr('fill', 'steelblue') // Color of the ball\n    .attr('stroke', 'steelblue'); // Optional stroke for visibility\n    // .attr('visibility', 'hidden'); // Hide it initially\n\n    // Append tooltip\n    const tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0).style(\"position\", \"absolute\").style(\"padding\", \"5px\").style(\"background\", \"rgba(0, 0, 0, 0.7)\").style(\"color\", \"white\").style(\"border-radius\", \"3px\");\n    svg.on('mousemove', e => {\n      const [mouseX] = d3.pointer(e);\n      const dateAtMouse = x.invert(mouseX);\n      const closestData = findClosestDataPoint(stockData, dateAtMouse);\n      if (closestData) {\n        var _closestData$price;\n        trackerLine.attr('stroke', 'steelblue').attr('stroke-width', 1).attr(\"x1\", x(closestData.date)).attr(\"x2\", x(closestData.date)).attr(\"y1\", 0).attr(\"y2\", height).style(\"opacity\", 1);\n\n        // Update ball position to match the closest data point\n        ball.attr('cx', x(closestData.date)).attr('cy', y(closestData.price)).attr('visibility', 'visible'); // Show the ball when data is available\n        if ((closestData === null || closestData === void 0 ? void 0 : closestData.price) == undefined) console.log('closestData', closestData);\n\n        // Update tooltip\n        tooltip.html(`Date: ${d3.timeFormat(\"%Y-%m-%d\")(closestData.date)}<br>Price: $${closestData === null || closestData === void 0 ? void 0 : (_closestData$price = closestData.price) === null || _closestData$price === void 0 ? void 0 : _closestData$price.toFixed(2)}`).style(\"opacity\", 1).style(\"left\", `${e.pageX + 10}px`).style(\"top\", `${e.pageY - 20}px`);\n      }\n    });\n    svg.on('click', function (e) {\n      // const [mouseX, mouseY] = d3.pointer(e);\n\n      // const dateAtMouse = x.invert(mouseX);\n      // const closestData = findClosestDataPoint(stockData, dateAtMouse);\n\n      /* see if you can copy the old one instead of making a new one*/\n      // Create a frozen tooltip at the clicked position\n      // const frozenTooltip = svg.append('g')\n      //     .attr('class', 'frozen-tooltip');\n\n      // frozenTooltip.append('circle') // Optional circle background\n      //     .attr('x', mouseX) // Use mouseX for horizontal position\n      //     .attr('y', mouseY) // Use mouseY for vertical position\n      //     .attr('r', 4)\n      //     .attr('fill', 'blue');\n\n      // // Use the closest data point's date and price but set position based on mouseY\n      // frozenTooltip.append('text')\n      //     .attr('x', mouseX + 10) // Offset for visibility\n      //     .attr('y', mouseY - 10) // Offset for visibility\n      //     .style(\"background\", \"rgba(0, 0, 0, 0.7)\")\n\n      //     .text(closestData ? `Date: ${closestData.date.toLocaleDateString()}, Price: $${closestData.price.toFixed(2)}` : 'No Data')\n      //     .attr('fill', 'white');\n    });\n  };\n  function formatAsCurrency(amount) {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(amount);\n  }\n\n  // Function to calculate profit\n  const calculateProfit = () => {\n    if (stockData.length === 0) return;\n\n    // Assuming stockData[0].price is the initial price and stockData[stockData.length - 1].price is the final price\n    const initialPrice = stockData[0].price;\n    const shares = purchaseAmount / initialPrice;\n    const finalPrice = stockData[stockData.length - 1].price;\n    const profitAmount = (shares * finalPrice - shares * initialPrice).toFixed(2);\n    setProfit(formatAsCurrency(profitAmount));\n  };\n  const fetchEarliestDate = async () => {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/earliest-date?symbol=${debouncedStock}`);\n      const newEarliestDate = formatDateString(response.data.earliestDate);\n      setEarliestDate(newEarliestDate);\n      if (new Date(newEarliestDate) > new Date(startDate)) {\n        setStartDate(newEarliestDate);\n      }\n\n      // Update endDate if it's earlier than the new earliest date\n      if (new Date(endDate) < new Date(newEarliestDate)) {\n        setEndDate(today); // Reset endDate to today\n      }\n    } catch (error) {\n      console.error('Error fetching earliest date:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Stock Investment Graph\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }, this), \"Earliest date:\", earliestDate, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }, this), \"Start date:\", startDate, /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Stock:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"End:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: \"100%\",\n              children: \"Purchase Amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Stock Symbol\",\n                  value: stock,\n                  onChange: e => setStock(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  max: today,\n                  min: earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : '',\n                  value: startDate,\n                  onChange: e => {\n                    const selectedDate = e.target.value;\n                    if (new Date(selectedDate) >= new Date(earliestDate) && new Date(selectedDate) <= new Date(today)) {\n                      setStartDate(selectedDate);\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  max: today,\n                  min: earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : '',\n                  value: endDate,\n                  onChange: e => {\n                    const selectedDate = e.target.value;\n                    if (new Date(selectedDate) >= new Date(earliestDate) && new Date(selectedDate) <= new Date(today)) {\n                      setEndDate(selectedDate);\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: purchaseAmount,\n                  onChange: e => setPurchaseAmount(e.target.value),\n                  placeholder: \"Purchase Amount in USD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Profit: \", profit]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 25\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: formattedStockData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 9\n  }, this);\n};\n_s(StockGraph, \"QfYcxg02hPk5OvkbhHCeKnuPq2Q=\", false, function () {\n  return [useDebounce];\n});\n_c = StockGraph;\nexport default StockGraph;\nvar _c;\n$RefreshReg$(_c, \"StockGraph\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","axios","useDebounce","jsxDEV","_jsxDEV","StockGraph","_s","stock","setStock","debouncedStock","startDate","setStartDate","endDate","setEndDate","profit","setProfit","purchaseAmount","setPurchaseAmount","stockData","setStockData","loading","setLoading","error","setError","earliestDate","setEarliestDate","today","Date","toISOString","split","formattedStockData","setFormattedStockData","svgRef","JSON","stringify","fetchEarliestDate","fetchStockData","length","drawGraph","formatDateString","dateString","match","url","response","fetch","ok","Error","result","json","map","item","price","previousPrice","data","date","timestamp","calculateProfit","err","message","findClosestDataPoint","dateAtMouse","left","right","mid","Math","floor","midDate","getTime","margin","top","bottom","width","height","select","current","selectAll","remove","svg","attr","append","style","x","scaleTime","domain","extent","d","range","y","scaleLinear","max","call","axisBottom","axisLeft","line","datum","trackerLine","ball","tooltip","on","e","mouseX","pointer","invert","closestData","_closestData$price","undefined","console","log","html","timeFormat","toFixed","pageX","pageY","formatAsCurrency","amount","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","format","initialPrice","shares","finalPrice","profitAmount","get","newEarliestDate","children","fileName","_jsxFileName","lineNumber","columnNumber","colSpan","type","placeholder","value","onChange","target","min","selectedDate","ref","_c","$RefreshReg$"],"sources":["/Users/ahmadomar/stocks/frontend/src/components/stockGraph.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport axios from 'axios';\n\nimport useDebounce from './../hooks/useDebounce';\n\nconst StockGraph = () => {\n    const [stock, setStock] = useState('ANF'); // Stock symbol\n    const debouncedStock = useDebounce(stock, 500);\n    const [startDate, setStartDate] = useState('2024-10-15'); // Default start date\n    // const [startDate, setStartDate] = useState('1900-01-01'); // Default start date\n    const [endDate, setEndDate] = useState('2024-10-16'); // Default end date\n    const [profit, setProfit] = useState(null);\n    const [purchaseAmount, setPurchaseAmount] = useState(100); // Default purchase amount\n    const [stockData, setStockData] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [earliestDate, setEarliestDate] = useState('');\n    const today = new Date().toISOString().split('T')[0]; // Get today's date in YYYY-MM-DD format\n    \n    const [formattedStockData, setFormattedStockData] = useState('');\n\n    const svgRef = useRef(); // Ref for the SVG element\n\n\n    useEffect(() => {\n        setFormattedStockData(JSON.stringify(stockData, null, 2)); // 2 spaces for pretty printing\n    }, [stockData]);\n\n    // useEffect(() => {\n    //     calculateProfit();\n    // }, [purchaseAmount]);\n\n    useEffect(() => {\n        fetchEarliestDate();\n    }, [debouncedStock]);\n\n    useEffect(() => {\n        if (debouncedStock && startDate && endDate) {\n            fetchStockData();\n        }\n    }, [debouncedStock, startDate, endDate, purchaseAmount]);\n\n    useEffect(() => {\n        if (stockData.length) {\n            drawGraph(); // Call function to draw the graph\n        }\n    }, [stockData]);\n\n\n    function formatDateString(dateString){\n        const match = dateString.match(/^(\\d{4}-\\d{2}-\\d{2})/);\n        return match ? match[1] : ''; // Return the matched date or null if no match\n    }\n\n    const fetchStockData = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const url = `http://localhost:5000/api/stocks?stock=${debouncedStock}&startDate=${startDate}&endDate=${endDate}`;\n            const response = await fetch(url);\n            if (!response.ok) throw new Error('Network response was not ok');\n            const result = await response.json();\n            // Combine dates and prices\n            const formattedStockData = result.map((item) => {\n                var price = item?.price == null ? previousPrice : item.price;\n                var data = {\n                    date: new Date(item.timestamp * 1000),\n                    price\n                }\n                var previousPrice = price;\n            });\n            setStockData(formattedStockData);\n            calculateProfit(formattedStockData); // Calculate profit based on new data\n        } catch (err) {\n            setError(err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const findClosestDataPoint = (stockData, dateAtMouse) => {\n        var left = 0;\n        var right = stockData.length-1;\n\n        while(left < right){\n            var mid = Math.floor((right+left)/2);\n            var midDate = stockData[mid].date;\n            if(midDate.getTime() == dateAtMouse.getTime()) break;\n            if(midDate < dateAtMouse){\n                left = mid+1;\n            }else{\n                right = mid-1;\n            }\n        }\n        return stockData[mid];\n    }\n\n    const drawGraph = () => {\n        // Set dimensions and margins for the graph\n        const margin = { top: 20, right: 30, bottom: 40, left: 40 };\n        const width = 800 - margin.left - margin.right;\n        const height = 400 - margin.top - margin.bottom;\n\n        // Clear any previous SVG\n        d3.select(svgRef.current).selectAll('*').remove();\n\n        // Create an SVG element\n        const svg = d3.select(svgRef.current)\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform', `translate(${margin.left},${margin.top})`);\n\n        // Add an invisible rect for capturing mousemove events\n        svg.append('rect')\n            .attr('width', width)\n            .attr('height', height)\n            .style('fill', 'none')\n            .style('pointer-events', 'all') // Ensures it can capture mouse events\n            // .on('mousemove', handleMousemove); // Attach your mousemove handler here\n\n        // Set the scales\n        const x = d3.scaleTime()\n            .domain(d3.extent(stockData, d => d.date))\n            .range([0, width]);\n\n        const y = d3.scaleLinear()\n            .domain([0, d3.max(stockData, d => d.price)])\n            .range([height, 0]);\n\n        // Add the axes\n        svg.append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', `translate(0,${height})`)\n            .call(d3.axisBottom(x));\n            // .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\")));\n\n        svg.append('g')\n            .attr('class', 'y-axis')\n            .call(d3.axisLeft(y));\n\n        // Draw the line\n        const line = d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price));\n\n        svg.append('path')\n            .datum(stockData)\n            .attr('fill', 'none')\n            .attr('stroke', 'steelblue')\n            .attr('stroke-width', 1.5)\n            .attr('d', line);\n\n\n        const trackerLine = svg.append('line')\n            .attr('stroke','steelblue')\n            .attr('stroke-width',1)\n            .attr(\"y1\", 0)\n            .attr(\"y2\", height)\n            .style(\"opacity\", 1);\n\n        // Append a circle to your SVG for the tracker ball\n        const ball = svg.append('circle')\n            .attr('r', 5)                // Radius of the ball\n            .attr('fill', 'steelblue')         // Color of the ball\n            .attr('stroke', 'steelblue');     // Optional stroke for visibility\n            // .attr('visibility', 'hidden'); // Hide it initially\n\n        // Append tooltip\n        const tooltip = d3.select(\"body\").append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0)\n            .style(\"position\", \"absolute\")\n            .style(\"padding\", \"5px\")\n            .style(\"background\", \"rgba(0, 0, 0, 0.7)\")\n            .style(\"color\", \"white\")\n            .style(\"border-radius\", \"3px\");\n\n        svg.on('mousemove',(e)=>{\n            const [mouseX] = d3.pointer(e);\n            const dateAtMouse = x.invert(mouseX);\n            const closestData = findClosestDataPoint(stockData,dateAtMouse);\n            if(closestData){\n                trackerLine\n                    .attr('stroke','steelblue')\n                    .attr('stroke-width',1)\n                    .attr(\"x1\", x(closestData.date))\n                    .attr(\"x2\", x(closestData.date))\n                    .attr(\"y1\", 0)\n                    .attr(\"y2\", height)\n                    .style(\"opacity\", 1);\n    \n                // Update ball position to match the closest data point\n                ball\n                    .attr('cx', x(closestData.date))\n                    .attr('cy', y(closestData.price))\n                    .attr('visibility', 'visible'); // Show the ball when data is available\n                if(closestData?.price == undefined) console.log('closestData',closestData)\n\n                // Update tooltip\n                tooltip\n                    .html(`Date: ${d3.timeFormat(\"%Y-%m-%d\")(closestData.date)}<br>Price: $${closestData?.price?.toFixed(2)}`)\n                    .style(\"opacity\", 1)\n                    .style(\"left\", `${e.pageX + 10}px`)\n                    .style(\"top\", `${e.pageY - 20}px`);\n            }\n        });\n\n        svg.on('click', function(e) {\n            // const [mouseX, mouseY] = d3.pointer(e);\n\n            // const dateAtMouse = x.invert(mouseX);\n            // const closestData = findClosestDataPoint(stockData, dateAtMouse);\n\n            /* see if you can copy the old one instead of making a new one*/\n            // Create a frozen tooltip at the clicked position\n            // const frozenTooltip = svg.append('g')\n            //     .attr('class', 'frozen-tooltip');\n\n            // frozenTooltip.append('circle') // Optional circle background\n            //     .attr('x', mouseX) // Use mouseX for horizontal position\n            //     .attr('y', mouseY) // Use mouseY for vertical position\n            //     .attr('r', 4)\n            //     .attr('fill', 'blue');\n\n            // // Use the closest data point's date and price but set position based on mouseY\n            // frozenTooltip.append('text')\n            //     .attr('x', mouseX + 10) // Offset for visibility\n            //     .attr('y', mouseY - 10) // Offset for visibility\n            //     .style(\"background\", \"rgba(0, 0, 0, 0.7)\")\n\n            //     .text(closestData ? `Date: ${closestData.date.toLocaleDateString()}, Price: $${closestData.price.toFixed(2)}` : 'No Data')\n            //     .attr('fill', 'white');\n        });\n    };\n\n    function formatAsCurrency(amount) {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        }).format(amount);\n    }\n\n    // Function to calculate profit\n    const calculateProfit = () => {\n        if (stockData.length === 0) return;\n\n        // Assuming stockData[0].price is the initial price and stockData[stockData.length - 1].price is the final price\n        const initialPrice = stockData[0].price;\n        const shares = (purchaseAmount/initialPrice);\n        const finalPrice = stockData[stockData.length - 1].price;\n        const profitAmount = ((shares*finalPrice) - (shares*initialPrice)).toFixed(2);\n        setProfit(formatAsCurrency(profitAmount));\n    };\n\n    const fetchEarliestDate = async () => {\n        try {\n            const response = await axios.get(`http://localhost:5000/api/earliest-date?symbol=${debouncedStock}`);\n            const newEarliestDate = formatDateString(response.data.earliestDate);\n            setEarliestDate(newEarliestDate);\n\n            if(new Date(newEarliestDate)>new Date(startDate)) {\n                setStartDate(newEarliestDate);\n            }\n\n            // Update endDate if it's earlier than the new earliest date\n            if (new Date(endDate) < new Date(newEarliestDate)) {\n                setEndDate(today); // Reset endDate to today\n            }\n        } catch (error) {\n            console.error('Error fetching earliest date:', error);\n        }\n    };\n\n    return (\n        <div>\n            <h1>Stock Investment Graph</h1>\n            Earliest date:{earliestDate}\n            <br/>\n            Start date:{startDate}\n            <form>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Stock:</th>\n                            <th>Start:</th>\n                            <th>End:</th>\n                            <th colSpan='100%'>Purchase Amount:</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Stock Symbol\"\n                                        value={stock}\n                                        onChange={(e) => setStock(e.target.value)}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"date\"\n                                        max={today}\n                                        min={earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : ''}\n                                        value={startDate}\n                                        onChange={(e) => {\n                                            const selectedDate = e.target.value;\n                                            if (new Date(selectedDate) >= new Date(earliestDate) && new Date(selectedDate) <= new Date(today)) {\n                                                setStartDate(selectedDate);\n                                            }\n                                        }}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"date\"\n                                        max={today}\n                                        min={earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : ''}\n                                        value={endDate}\n                                        onChange={(e) => {\n                                            const selectedDate = e.target.value;\n                                            if (new Date(selectedDate) >= new Date(earliestDate) && new Date(selectedDate) <= new Date(today)) {\n                                                setEndDate(selectedDate);\n                                            }\n                                        }}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"number\"\n                                        value={purchaseAmount}\n                                        onChange={(e) => setPurchaseAmount(e.target.value)}\n                                        placeholder=\"Purchase Amount in USD\"\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                {/*<button type=\"submit\">Fetch Data</button>*/}\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </form>\n            <svg ref={svgRef}></svg> {/* SVG for D3 to draw on */}\n            <h2>Profit: {profit}</h2>\n            {loading && <p>Loading...</p>}\n            {error && <p>Error: {error}</p>}\n            <pre>{formattedStockData}</pre>\n        </div>\n    );\n};\n\nexport default StockGraph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}