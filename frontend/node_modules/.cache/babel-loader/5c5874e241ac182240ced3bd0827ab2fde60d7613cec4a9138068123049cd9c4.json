{"ast":null,"code":"var _jsxFileName = \"/Users/ahmadomar/stocks/frontend/src/components/stockGraph.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport axios from 'axios';\nimport useDebounce from './../hooks/useDebounce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StockGraph = () => {\n  _s();\n  const [stock, setStock] = useState('LLY'); // this is actually the stock symbol not the name\n  const debouncedStock = useDebounce(stock, 500); // this gives the user a chance to finish writing\n\n  const [startDate, setStartDate] = useState('1975-10-15'); // Default start date\n  const debouncedStartDate = useDebounce(startDate, 500); // this gives the user a chance to finish writing\n\n  const [endDate, setEndDate] = useState('2024-10-16'); // Default start date\n  const debouncedEndDate = useDebounce(endDate, 500); // this gives the user a chance to finish writing\n\n  const [purchaseAmount, setPurchaseAmount] = useState(1000); // Default purchase amount\n  const [stockData, setStockData] = useState([]);\n  const [profit, setProfit] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [earliestDate, setEarliestDate] = useState('');\n  const [formattedStockData, setFormattedStockData] = useState('');\n  const svgRef = useRef(); // Ref for the SVG element\n\n  useEffect(() => {\n    setFormattedStockData(JSON.stringify(stockData, null, 2)); // 2 spaces for pretty printing\n  }, [stockData]);\n\n  // useEffect(() => {\n  //     const fetchEarliestDate = async () => {\n  //         try {\n  //             const response = await axios.get(`/api/earliest-date/${stock}`);\n  //             setEarliestDate(response.data.earliestDate);\n  //         } catch (error) {\n  //             console.error('Error fetching earliest date:', error);\n  //         }\n  //     };\n\n  //     if (stock) {\n  //         fetchEarliestDate();\n  //     }\n  // }, [stock]);\n\n  function formatDateString(dateString) {\n    console.log('dateString', dateString);\n    const match = dateString.match(/^(\\d{4}-\\d{2}-\\d{2})/);\n    console.log('match', match);\n    return match ? match[1] : ''; // Return the matched date or null if no match\n  }\n  const fetchStockData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      var url = `http://localhost:5000/api/stocks?stock=${stock}&startDate=${startDate}&endDate=${endDate}`;\n      // console.log('url',url)\n      const response = await fetch(url);\n      if (!response.ok) throw new Error('Network response was not ok');\n      const result = await response.json();\n      // Combine dates and prices\n      const formattedStockData = result.map(item => ({\n        date: new Date(item.timestamp * 1000),\n        price: item.price\n      }));\n      setStockData(formattedStockData);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const drawGraph = () => {\n    // Set dimensions and margins for the graph\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 40,\n      left: 40\n    };\n    const width = 800 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Clear any previous SVG\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    // Create an SVG element\n    const svg = d3.select(svgRef.current).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n\n    // Set the scales\n    const x = d3.scaleTime().domain(d3.extent(stockData, d => d.date)).range([0, width]);\n    const y = d3.scaleLinear().domain([0, d3.max(stockData, d => d.price)]).range([height, 0]);\n\n    // Add the axes\n    svg.append('g').attr('class', 'x-axis').attr('transform', `translate(0,${height})`).call(d3.axisBottom(x));\n    // .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\")));\n\n    svg.append('g').attr('class', 'y-axis').call(d3.axisLeft(y));\n\n    // Draw the line\n    const line = d3.line().x(d => x(d.date)).y(d => y(d.price));\n    svg.append('path').datum(stockData).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-width', 1.5).attr('d', line);\n  };\n\n  // Function to calculate profit\n  const calculateProfit = () => {\n    if (stockData.length === 0) return;\n\n    // Assuming stockData[0].price is the initial price and stockData[stockData.length - 1].price is the final price\n    const initialPrice = stockData[0].price;\n    const finalPrice = stockData[stockData.length - 1].price;\n\n    // Calculate the profit/loss\n    // const sharesBought = investmentAmount / initialPrice;\n    // const finalValue = sharesBought * finalPrice;\n    // const profitAmount = finalValue - investmentAmount;\n    const profitAmount = finalPrice - initialPrice;\n    setProfit(profitAmount);\n  };\n  const fetchEarliestDate = async () => {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/earliest-date?symbol=${stock}`);\n      setEarliestDate(formatDateString(response.data.earliestDate));\n      var newStartDate = formatDateString(earliestDate);\n      console.log('earliestDate,startDate', earliestDate, startDate, earliestDate > startDate);\n      // if(earliestDate < startDate) setStartDate('1989-01-01');\n      if (earliestDate > startDate) {\n        setStartDate(newStartDate);\n      }\n    } catch (error) {\n      console.error('Error fetching earliest date:', error);\n    }\n  };\n  useEffect(() => {\n    console.log('stock changed', stock);\n    fetchStockData();\n  }, [debouncedStock, debouncedStartDate, debouncedEndDate]);\n  useEffect(() => {\n    if (stockData.length) {\n      drawGraph(); // Call the function to draw the graph\n    }\n    calculateProfit();\n    fetchEarliestDate();\n  }, [stockData]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    // fetchStockData(); // Fetch data on form submission\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Stock Investment Graph\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this), earliestDate, /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Stock:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"End:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: \"100%\",\n              children: \"Purchase Amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Stock Symbol\",\n                  value: stock,\n                  onChange: e => setStock(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  min: earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : '',\n                  value: startDate,\n                  onChange: e => setStartDate(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: endDate,\n                  onChange: e => setEndDate(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: purchaseAmount,\n                  onChange: e => setPurchaseAmount(e.target.value),\n                  placeholder: \"Purchase Amount in USD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                children: \"Fetch Data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 25\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: formattedStockData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 9\n  }, this);\n};\n_s(StockGraph, \"HyK95iuUcQqvO6Mrms8hlEeLqJc=\", false, function () {\n  return [useDebounce, useDebounce, useDebounce];\n});\n_c = StockGraph;\nexport default StockGraph;\nvar _c;\n$RefreshReg$(_c, \"StockGraph\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","axios","useDebounce","jsxDEV","_jsxDEV","StockGraph","_s","stock","setStock","debouncedStock","startDate","setStartDate","debouncedStartDate","endDate","setEndDate","debouncedEndDate","purchaseAmount","setPurchaseAmount","stockData","setStockData","profit","setProfit","loading","setLoading","error","setError","earliestDate","setEarliestDate","formattedStockData","setFormattedStockData","svgRef","JSON","stringify","formatDateString","dateString","console","log","match","fetchStockData","url","response","fetch","ok","Error","result","json","map","item","date","Date","timestamp","price","err","message","drawGraph","margin","top","right","bottom","left","width","height","select","current","selectAll","remove","svg","attr","append","x","scaleTime","domain","extent","d","range","y","scaleLinear","max","call","axisBottom","axisLeft","line","datum","calculateProfit","length","initialPrice","finalPrice","profitAmount","fetchEarliestDate","get","data","newStartDate","handleSubmit","e","preventDefault","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","colSpan","type","placeholder","value","onChange","target","min","toISOString","split","ref","_c","$RefreshReg$"],"sources":["/Users/ahmadomar/stocks/frontend/src/components/stockGraph.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport axios from 'axios';\n\nimport useDebounce from './../hooks/useDebounce';\n\nconst StockGraph = () => {\n    const [stock, setStock] = useState('LLY'); // this is actually the stock symbol not the name\n    const debouncedStock = useDebounce(stock, 500); // this gives the user a chance to finish writing\n\n    const [startDate, setStartDate] = useState('1975-10-15'); // Default start date\n    const debouncedStartDate = useDebounce(startDate, 500); // this gives the user a chance to finish writing\n\n    const [endDate, setEndDate] =  useState('2024-10-16'); // Default start date\n    const debouncedEndDate = useDebounce(endDate, 500); // this gives the user a chance to finish writing\n\n    const [purchaseAmount, setPurchaseAmount] = useState(1000); // Default purchase amount\n    const [stockData, setStockData] = useState([]);\n    const [profit, setProfit] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [earliestDate, setEarliestDate] = useState('');\n\n    const [formattedStockData, setFormattedStockData] = useState('');\n\n    const svgRef = useRef(); // Ref for the SVG element\n\n    useEffect(()=>{\n        setFormattedStockData(JSON.stringify(stockData, null, 2)); // 2 spaces for pretty printing\n    }\n    ,[stockData])\n\n    // useEffect(() => {\n    //     const fetchEarliestDate = async () => {\n    //         try {\n    //             const response = await axios.get(`/api/earliest-date/${stock}`);\n    //             setEarliestDate(response.data.earliestDate);\n    //         } catch (error) {\n    //             console.error('Error fetching earliest date:', error);\n    //         }\n    //     };\n\n    //     if (stock) {\n    //         fetchEarliestDate();\n    //     }\n    // }, [stock]);\n\n    function formatDateString(dateString){\n        console.log('dateString',dateString)\n        const match = dateString.match(/^(\\d{4}-\\d{2}-\\d{2})/);\n        console.log('match',match)\n        return match ? match[1] : ''; // Return the matched date or null if no match\n    }\n\n\n    const fetchStockData = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            var url = `http://localhost:5000/api/stocks?stock=${stock}&startDate=${startDate}&endDate=${endDate}`;\n            // console.log('url',url)\n            const response = await fetch(url);\n            if (!response.ok) throw new Error('Network response was not ok');\n            const result = await response.json();\n            // Combine dates and prices\n            const formattedStockData = result.map((item)=>({date:new Date(item.timestamp*1000), price:item.price}));\n            setStockData(formattedStockData);\n        } catch (err) {\n            setError(err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const drawGraph = () => {\n        // Set dimensions and margins for the graph\n        const margin = { top: 20, right: 30, bottom: 40, left: 40 };\n        const width = 800 - margin.left - margin.right;\n        const height = 400 - margin.top - margin.bottom;\n\n        // Clear any previous SVG\n        d3.select(svgRef.current).selectAll('*').remove();\n\n        // Create an SVG element\n        const svg = d3.select(svgRef.current)\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform', `translate(${margin.left},${margin.top})`);\n\n        // Set the scales\n        const x = d3.scaleTime()\n            .domain(d3.extent(stockData, d => d.date))\n            .range([0, width]);\n\n        const y = d3.scaleLinear()\n            .domain([0, d3.max(stockData, d => d.price)])\n            .range([height, 0]);\n\n        // Add the axes\n        svg.append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', `translate(0,${height})`)\n            .call(d3.axisBottom(x));\n            // .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\")));\n\n        svg.append('g')\n            .attr('class', 'y-axis')\n            .call(d3.axisLeft(y));\n\n        // Draw the line\n        const line = d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price));\n\n        svg.append('path')\n            .datum(stockData)\n            .attr('fill', 'none')\n            .attr('stroke', 'steelblue')\n            .attr('stroke-width', 1.5)\n            .attr('d', line);\n    };\n\n    // Function to calculate profit\n    const calculateProfit = () => {\n        if (stockData.length === 0) return;\n\n        // Assuming stockData[0].price is the initial price and stockData[stockData.length - 1].price is the final price\n        const initialPrice = stockData[0].price;\n        const finalPrice = stockData[stockData.length - 1].price;\n\n        // Calculate the profit/loss\n        // const sharesBought = investmentAmount / initialPrice;\n        // const finalValue = sharesBought * finalPrice;\n        // const profitAmount = finalValue - investmentAmount;\n        const profitAmount = finalPrice - initialPrice;\n\n        setProfit(profitAmount);\n    };\n\n    const fetchEarliestDate = async () => {\n        try {\n            const response = await axios.get(`http://localhost:5000/api/earliest-date?symbol=${stock}`);\n            setEarliestDate(formatDateString(response.data.earliestDate));\n            var newStartDate = formatDateString(earliestDate);\n\n            console.log('earliestDate,startDate',earliestDate,startDate, earliestDate>startDate)\n            // if(earliestDate < startDate) setStartDate('1989-01-01');\n            if(earliestDate > startDate) {\n                setStartDate(newStartDate);\n            }\n        } catch (error) {\n            console.error('Error fetching earliest date:', error);\n        }\n    };\n\n    useEffect(() => {\n        console.log('stock changed',stock);\n        fetchStockData();\n    }, [debouncedStock, debouncedStartDate, debouncedEndDate]);\n    \n    useEffect(() => {\n        if (stockData.length) {\n            drawGraph(); // Call the function to draw the graph\n        }\n        calculateProfit();\n        fetchEarliestDate();\n    }, [stockData]);\n\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        // fetchStockData(); // Fetch data on form submission\n    };\n\n    return (\n        <div>\n            <h1>Stock Investment Graph</h1>\n            {earliestDate}\n            <form onSubmit={handleSubmit}>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Stock:</th>\n                            <th>Start:</th>\n                            <th>End:</th>\n                            <th colSpan='100%'>Purchase Amount:</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Stock Symbol\"\n                                        value={stock}\n                                        onChange={(e) => setStock(e.target.value)}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"date\"\n                                        min={earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : ''}\n                                        value={startDate}\n                                        onChange={(e) => setStartDate(e.target.value)}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"date\"\n                                        value={endDate}\n                                        onChange={(e) => setEndDate(e.target.value)}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"number\"\n                                        value={purchaseAmount}\n                                        onChange={(e) => setPurchaseAmount(e.target.value)}\n                                        placeholder=\"Purchase Amount in USD\"\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <button type=\"submit\">Fetch Data</button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </form>\n            {loading && <p>Loading...</p>}\n            {error && <p>Error: {error}</p>}\n            <svg ref={svgRef}></svg> {/* SVG for D3 to draw on */}\n            <pre>{formattedStockData}</pre>\n        </div>\n    );\n};\n\nexport default StockGraph;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAO,KAAKC,EAAE,MAAM,IAAI;AACxB,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAOC,WAAW,MAAM,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC3C,MAAMY,cAAc,GAAGP,WAAW,CAACK,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;;EAEhD,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;EAC1D,MAAMe,kBAAkB,GAAGV,WAAW,CAACQ,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC;;EAExD,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAIjB,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;EACvD,MAAMkB,gBAAgB,GAAGb,WAAW,CAACW,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;;EAEpD,MAAM,CAACG,cAAc,EAAEC,iBAAiB,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC5D,MAAM,CAACqB,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACuB,MAAM,EAAEC,SAAS,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC2B,KAAK,EAAEC,QAAQ,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC6B,YAAY,EAAEC,eAAe,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAM,CAAC+B,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAEhE,MAAMiC,MAAM,GAAG/B,MAAM,CAAC,CAAC,CAAC,CAAC;;EAEzBD,SAAS,CAAC,MAAI;IACV+B,qBAAqB,CAACE,IAAI,CAACC,SAAS,CAACd,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAC/D,CAAC,EACA,CAACA,SAAS,CAAC,CAAC;;EAEb;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA,SAASe,gBAAgBA,CAACC,UAAU,EAAC;IACjCC,OAAO,CAACC,GAAG,CAAC,YAAY,EAACF,UAAU,CAAC;IACpC,MAAMG,KAAK,GAAGH,UAAU,CAACG,KAAK,CAAC,sBAAsB,CAAC;IACtDF,OAAO,CAACC,GAAG,CAAC,OAAO,EAACC,KAAK,CAAC;IAC1B,OAAOA,KAAK,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;EAClC;EAGA,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/Bf,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACA,IAAIc,GAAG,GAAG,0CAA0ChC,KAAK,cAAcG,SAAS,YAAYG,OAAO,EAAE;MACrG;MACA,MAAM2B,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;MACjC,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;MAChE,MAAMC,MAAM,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MACpC;MACA,MAAMjB,kBAAkB,GAAGgB,MAAM,CAACE,GAAG,CAAEC,IAAI,KAAI;QAACC,IAAI,EAAC,IAAIC,IAAI,CAACF,IAAI,CAACG,SAAS,GAAC,IAAI,CAAC;QAAEC,KAAK,EAACJ,IAAI,CAACI;MAAK,CAAC,CAAC,CAAC;MACvGhC,YAAY,CAACS,kBAAkB,CAAC;IACpC,CAAC,CAAC,OAAOwB,GAAG,EAAE;MACV3B,QAAQ,CAAC2B,GAAG,CAACC,OAAO,CAAC;IACzB,CAAC,SAAS;MACN9B,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAM+B,SAAS,GAAGA,CAAA,KAAM;IACpB;IACA,MAAMC,MAAM,GAAG;MAAEC,GAAG,EAAE,EAAE;MAAEC,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC;IAC3D,MAAMC,KAAK,GAAG,GAAG,GAAGL,MAAM,CAACI,IAAI,GAAGJ,MAAM,CAACE,KAAK;IAC9C,MAAMI,MAAM,GAAG,GAAG,GAAGN,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACG,MAAM;;IAE/C;IACA1D,EAAE,CAAC8D,MAAM,CAAChC,MAAM,CAACiC,OAAO,CAAC,CAACC,SAAS,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;;IAEjD;IACA,MAAMC,GAAG,GAAGlE,EAAE,CAAC8D,MAAM,CAAChC,MAAM,CAACiC,OAAO,CAAC,CAChCI,IAAI,CAAC,OAAO,EAAEP,KAAK,GAAGL,MAAM,CAACI,IAAI,GAAGJ,MAAM,CAACE,KAAK,CAAC,CACjDU,IAAI,CAAC,QAAQ,EAAEN,MAAM,GAAGN,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACG,MAAM,CAAC,CACnDU,MAAM,CAAC,GAAG,CAAC,CACXD,IAAI,CAAC,WAAW,EAAE,aAAaZ,MAAM,CAACI,IAAI,IAAIJ,MAAM,CAACC,GAAG,GAAG,CAAC;;IAEjE;IACA,MAAMa,CAAC,GAAGrE,EAAE,CAACsE,SAAS,CAAC,CAAC,CACnBC,MAAM,CAACvE,EAAE,CAACwE,MAAM,CAACtD,SAAS,EAAEuD,CAAC,IAAIA,CAAC,CAACzB,IAAI,CAAC,CAAC,CACzC0B,KAAK,CAAC,CAAC,CAAC,EAAEd,KAAK,CAAC,CAAC;IAEtB,MAAMe,CAAC,GAAG3E,EAAE,CAAC4E,WAAW,CAAC,CAAC,CACrBL,MAAM,CAAC,CAAC,CAAC,EAAEvE,EAAE,CAAC6E,GAAG,CAAC3D,SAAS,EAAEuD,CAAC,IAAIA,CAAC,CAACtB,KAAK,CAAC,CAAC,CAAC,CAC5CuB,KAAK,CAAC,CAACb,MAAM,EAAE,CAAC,CAAC,CAAC;;IAEvB;IACAK,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CACVD,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CACvBA,IAAI,CAAC,WAAW,EAAE,eAAeN,MAAM,GAAG,CAAC,CAC3CiB,IAAI,CAAC9E,EAAE,CAAC+E,UAAU,CAACV,CAAC,CAAC,CAAC;IACvB;;IAEJH,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CACVD,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CACvBW,IAAI,CAAC9E,EAAE,CAACgF,QAAQ,CAACL,CAAC,CAAC,CAAC;;IAEzB;IACA,MAAMM,IAAI,GAAGjF,EAAE,CAACiF,IAAI,CAAC,CAAC,CACjBZ,CAAC,CAACI,CAAC,IAAIJ,CAAC,CAACI,CAAC,CAACzB,IAAI,CAAC,CAAC,CACjB2B,CAAC,CAACF,CAAC,IAAIE,CAAC,CAACF,CAAC,CAACtB,KAAK,CAAC,CAAC;IAEvBe,GAAG,CAACE,MAAM,CAAC,MAAM,CAAC,CACbc,KAAK,CAAChE,SAAS,CAAC,CAChBiD,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,CAC3BA,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CACzBA,IAAI,CAAC,GAAG,EAAEc,IAAI,CAAC;EACxB,CAAC;;EAED;EACA,MAAME,eAAe,GAAGA,CAAA,KAAM;IAC1B,IAAIjE,SAAS,CAACkE,MAAM,KAAK,CAAC,EAAE;;IAE5B;IACA,MAAMC,YAAY,GAAGnE,SAAS,CAAC,CAAC,CAAC,CAACiC,KAAK;IACvC,MAAMmC,UAAU,GAAGpE,SAAS,CAACA,SAAS,CAACkE,MAAM,GAAG,CAAC,CAAC,CAACjC,KAAK;;IAExD;IACA;IACA;IACA;IACA,MAAMoC,YAAY,GAAGD,UAAU,GAAGD,YAAY;IAE9ChE,SAAS,CAACkE,YAAY,CAAC;EAC3B,CAAC;EAED,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACA,MAAMhD,QAAQ,GAAG,MAAMvC,KAAK,CAACwF,GAAG,CAAC,kDAAkDlF,KAAK,EAAE,CAAC;MAC3FoB,eAAe,CAACM,gBAAgB,CAACO,QAAQ,CAACkD,IAAI,CAAChE,YAAY,CAAC,CAAC;MAC7D,IAAIiE,YAAY,GAAG1D,gBAAgB,CAACP,YAAY,CAAC;MAEjDS,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAACV,YAAY,EAAChB,SAAS,EAAEgB,YAAY,GAAChB,SAAS,CAAC;MACpF;MACA,IAAGgB,YAAY,GAAGhB,SAAS,EAAE;QACzBC,YAAY,CAACgF,YAAY,CAAC;MAC9B;IACJ,CAAC,CAAC,OAAOnE,KAAK,EAAE;MACZW,OAAO,CAACX,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACzD;EACJ,CAAC;EAED1B,SAAS,CAAC,MAAM;IACZqC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAC7B,KAAK,CAAC;IAClC+B,cAAc,CAAC,CAAC;EACpB,CAAC,EAAE,CAAC7B,cAAc,EAAEG,kBAAkB,EAAEG,gBAAgB,CAAC,CAAC;EAE1DjB,SAAS,CAAC,MAAM;IACZ,IAAIoB,SAAS,CAACkE,MAAM,EAAE;MAClB9B,SAAS,CAAC,CAAC,CAAC,CAAC;IACjB;IACA6B,eAAe,CAAC,CAAC;IACjBK,iBAAiB,CAAC,CAAC;EACvB,CAAC,EAAE,CAACtE,SAAS,CAAC,CAAC;EAGf,MAAM0E,YAAY,GAAIC,CAAC,IAAK;IACxBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB;EACJ,CAAC;EAED,oBACI1F,OAAA;IAAA2F,QAAA,gBACI3F,OAAA;MAAA2F,QAAA,EAAI;IAAsB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC9BzE,YAAY,eACbtB,OAAA;MAAMgG,QAAQ,EAAER,YAAa;MAAAG,QAAA,eACzB3F,OAAA;QAAA2F,QAAA,gBACI3F,OAAA;UAAA2F,QAAA,eACI3F,OAAA;YAAA2F,QAAA,gBACI3F,OAAA;cAAA2F,QAAA,EAAI;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACf/F,OAAA;cAAA2F,QAAA,EAAI;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACf/F,OAAA;cAAA2F,QAAA,EAAI;YAAI;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACb/F,OAAA;cAAIiG,OAAO,EAAC,MAAM;cAAAN,QAAA,EAAC;YAAgB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eACR/F,OAAA;UAAA2F,QAAA,eACI3F,OAAA;YAAA2F,QAAA,gBACI3F,OAAA;cAAA2F,QAAA,eACI3F,OAAA;gBAAA2F,QAAA,eACI3F,OAAA;kBACIkG,IAAI,EAAC,MAAM;kBACXC,WAAW,EAAC,cAAc;kBAC1BC,KAAK,EAAEjG,KAAM;kBACbkG,QAAQ,EAAGZ,CAAC,IAAKrF,QAAQ,CAACqF,CAAC,CAACa,MAAM,CAACF,KAAK;gBAAE;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC,eACL/F,OAAA;cAAA2F,QAAA,eACI3F,OAAA;gBAAA2F,QAAA,eACI3F,OAAA;kBACIkG,IAAI,EAAC,MAAM;kBACXK,GAAG,EAAEjF,YAAY,GAAG,IAAIuB,IAAI,CAACvB,YAAY,CAAC,CAACkF,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAG;kBAC5EL,KAAK,EAAE9F,SAAU;kBACjB+F,QAAQ,EAAGZ,CAAC,IAAKlF,YAAY,CAACkF,CAAC,CAACa,MAAM,CAACF,KAAK;gBAAE;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjD;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC,eACL/F,OAAA;cAAA2F,QAAA,eACI3F,OAAA;gBAAA2F,QAAA,eACI3F,OAAA;kBACIkG,IAAI,EAAC,MAAM;kBACXE,KAAK,EAAE3F,OAAQ;kBACf4F,QAAQ,EAAGZ,CAAC,IAAK/E,UAAU,CAAC+E,CAAC,CAACa,MAAM,CAACF,KAAK;gBAAE;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/C;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC,eACL/F,OAAA;cAAA2F,QAAA,eACI3F,OAAA;gBAAA2F,QAAA,eACI3F,OAAA;kBACIkG,IAAI,EAAC,QAAQ;kBACbE,KAAK,EAAExF,cAAe;kBACtByF,QAAQ,EAAGZ,CAAC,IAAK5E,iBAAiB,CAAC4E,CAAC,CAACa,MAAM,CAACF,KAAK,CAAE;kBACnDD,WAAW,EAAC;gBAAwB;kBAAAP,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC,eACL/F,OAAA;cAAA2F,QAAA,eACI3F,OAAA;gBAAQkG,IAAI,EAAC,QAAQ;gBAAAP,QAAA,EAAC;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EACN7E,OAAO,iBAAIlB,OAAA;MAAA2F,QAAA,EAAG;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAC5B3E,KAAK,iBAAIpB,OAAA;MAAA2F,QAAA,GAAG,SAAO,EAACvE,KAAK;IAAA;MAAAwE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC/B/F,OAAA;MAAK0G,GAAG,EAAEhF;IAAO;MAAAkE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,KAAC,eACzB/F,OAAA;MAAA2F,QAAA,EAAMnE;IAAkB;MAAAoE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9B,CAAC;AAEd,CAAC;AAAC7F,EAAA,CA7OID,UAAU;EAAA,QAEWH,WAAW,EAGPA,WAAW,EAGbA,WAAW;AAAA;AAAA6G,EAAA,GARlC1G,UAAU;AA+OhB,eAAeA,UAAU;AAAC,IAAA0G,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}