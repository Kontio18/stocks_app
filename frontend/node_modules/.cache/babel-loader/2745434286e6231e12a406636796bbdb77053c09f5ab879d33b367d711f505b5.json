{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import*as d3 from'd3';import axios from'axios';import useDebounce from'./../hooks/useDebounce';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StockGraph=()=>{const[stock,setStock]=useState('ANF');const debouncedStock=useDebounce(stock,500);// const [startDate, setStartDate] = useState('2024-10-15'); // default start date\nconst[startDate,setStartDate]=useState('1900-01-01');// default start date\nconst[endDate,setEndDate]=useState('2024-10-16');// default end date\nconst[profit,setProfit]=useState(null);const[purchaseAmount,setPurchaseAmount]=useState(100);// default purchase amount $100\nconst[stockData,setStockData]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[earliestDate,setEarliestDate]=useState('');const today=new Date().toISOString().split('T')[0];// YYYY-MM-DD\nconst[formattedStockData,setFormattedStockData]=useState('');const svgRef=useRef();// rerender graph everytime svg is changed\nuseEffect(()=>{setFormattedStockData(JSON.stringify(stockData,null,2));// 2 spaces for pretty printing\n},[stockData]);useEffect(()=>{fetchEarliestDate();},[debouncedStock]);useEffect(()=>{if(debouncedStock&&startDate&&endDate){fetchStockData();}},[debouncedStock,startDate,endDate,purchaseAmount]);useEffect(()=>{if(stockData.length){drawGraph();}},[stockData]);function formatDateString(dateString){const match=dateString.match(/^(\\d{4}-\\d{2}-\\d{2})/);// YYYY-MM-DD\nreturn match?match[1]:'';}const fetchStockData=async()=>{setLoading(true);setError(null);try{const url=`http://localhost:5000/api/stocks?stock=${debouncedStock}&startDate=${startDate}&endDate=${endDate}`;const response=await fetch(url);if(!response.ok)throw new Error('Network response was not ok');const result=await response.json();let previousPrice=null;// used whenever price comes back as null\nconst formattedStockData=result.map(item=>{const date=new Date(item.timestamp*1000);const price=item.price!==null?item.price:previousPrice;// most recent known price\npreviousPrice=price;return{date,price};});setStockData(formattedStockData);calculateProfit(formattedStockData);}catch(err){setError(err.message);}finally{setLoading(false);}};// returns data point closest to mouse\nconst findClosestDataPoint=(stockData,dateAtMouse)=>{// binary search to find this faster\nvar left=0;var right=stockData.length-1;while(left<right){var mid=Math.floor((right+left)/2);var midDate=stockData[mid].date;if(midDate.getTime()==dateAtMouse.getTime())break;if(midDate<dateAtMouse){left=mid+1;}else{right=mid-1;}}return stockData[mid];};const drawGraph=()=>{// dimensions for graph\nconst margin={top:20,right:30,bottom:40,left:40};const width=800-margin.left-margin.right;const height=400-margin.top-margin.bottom;// remove old graph\nd3.select(svgRef.current).selectAll('*').remove();// create new graph\nconst svg=d3.select(svgRef.current).attr('width',width+margin.left+margin.right).attr('height',height+margin.top+margin.bottom).append('g').attr('transform',`translate(${margin.left},${margin.top})`);// const zoom = d3.zoom()\n//     .scaleExtent([1,10])\n//     .extent([0,0],[width,height])\n//     .translateExtent([[0,0],[width,height]])\n//     .on('zoom',zoomed);\n// svg.append('defs').append('clipPath')\n//     .attr('id','clip')\n//     .append('rect')\n//     .attr('width',width)\n//     .attr('height',height);\n// svg.call(zoom);\n// function zoomed(e){\n//     const newXScale = e.transform.rescaleX(x);\n//     const newYScale = e.transform.rescaleY(y);\n//     svg.select('.line')\n//         .attr('d', d3.line()\n//                 .x(d => newXScale(d.date))\n//                 .y(d => newYScale(d.date))\n//         )\n//     svg.select('.x-axis').call(d3.axisBottom(newXScale))\n//     svg.select('.y-axis').call(d3.axisLeft(newYScale))\n// }\n// svg.on('wheel', (e)=>{\n//     e.preventDefault();\n//     const scaleFactor = e.deltaY > 0 ? 1.1 : .9;\n//     svg.transition().call(zoom.scaleBy, scaleFactor);\n// });\nlet closestData;const handleMousemove=e=>{const[mouseX]=d3.pointer(e);const dateAtMouse=x.invert(mouseX);closestData=findClosestDataPoint(stockData,dateAtMouse);if(closestData){var _closestData,_closestData2,_closestData2$price;trackerLine.attr('stroke','steelblue').attr('stroke-width',1).attr(\"x1\",x(closestData.date)).attr(\"x2\",x(closestData.date)).attr(\"y1\",0).attr(\"y2\",height).style(\"opacity\",1);// Update ball position to match the closest data point\nball.attr('cx',x(closestData.date)).attr('cy',y(closestData.price)).attr('visibility','visible');// Show the ball when data is available\nif(((_closestData=closestData)===null||_closestData===void 0?void 0:_closestData.price)==undefined)console.log('closestData',closestData);// Update tooltip\ntooltip.html(`Date: ${d3.timeFormat(\"%Y-%m-%d\")(closestData.date)}<br>Price: $${(_closestData2=closestData)===null||_closestData2===void 0?void 0:(_closestData2$price=_closestData2.price)===null||_closestData2$price===void 0?void 0:_closestData2$price.toFixed(2)}`).style(\"opacity\",1).style(\"left\",`${e.pageX+10}px`).style(\"top\",`${e.pageY-20}px`);}};// const handleMouseout = (e) => {\n//     setTimeout( () => {\n//         tooltip.style('opacity',0)\n//         trackerLine.style('opacity',0)\n//     },200)\n// };\n// invisible rectangle for detecting mouseover event\nsvg.append('rect').attr('width',width).attr('height',height).style('fill','none').style('pointer-events','all');svg.on('mousemove',handleMousemove);svg.on('mouseout',()=>{trackerLine.style('opacity',0);tooltip.style('opacity',0);ball.style('opacity',0);});// .on('mouseout', handleMouseout)\nconst x=d3.scaleTime().domain(d3.extent(stockData,d=>d.date)).range([0,width]);const y=d3.scaleLinear().domain([0,d3.max(stockData,d=>d.price)]).range([height,0]);// Add the axes\nsvg.append('g').attr('class','x-axis').attr('transform',`translate(0,${height})`).call(d3.axisBottom(x));// .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\")));\nsvg.append('g').attr('class','y-axis').call(d3.axisLeft(y));// maps x and y access to date and price attributes\nconst line=d3.line().x(d=>x(d.date)).y(d=>y(d.price));svg.append('path').datum(stockData)// plugs in data\n.attr('fill','none').attr('stroke','steelblue').attr('stroke-width',1.5).attr('d',line);// svg.append('g')\n//     .attr('clip-path','url(#clipPath)')\n//     .append('path')\n//     .datum('stockData')\n//     .attr('class','line')\n//     .attr('d',line);\nconst trackerLine=svg.append('line').attr('stroke','steelblue').attr('stroke-width',1).attr('y1',0).attr('y2',height).style(\"opacity\",1);// lil ball on the line to show where it intersects the tracker\nconst ball=svg.append('circle').attr('r',3).attr('fill','steelblue').attr('stroke','steelblue');// shows info about garph intersect\nconst tooltip=d3.select(\"body\").append(\"div\").attr(\"class\",\"tooltip\").style(\"opacity\",0).style(\"position\",\"absolute\").style(\"padding\",\"5px\").style(\"background\",\"rgba(0, 0, 0, 0.7)\").style(\"color\",\"white\").style(\"border-radius\",\"3px\");svg.on('click',function(e){var _closestData3,_closestData3$price;console.log('closestData',closestData);// console.log('trackerLine',trackerLine)\nvar frozenTrackerLine=svg.append('line').attr('stroke','purple').attr('stroke-width',1).attr('x1',x(closestData.date)).attr('x2',x(closestData.date)).attr('y1',0).attr('y2',height).style(\"opacity\",1);// lil ball on the line to show where it intersects the tracker\nvar frozenBall=svg.append('circle').attr('cx',x(closestData.date)).attr('cy',y(closestData.price)).attr('visibility','visible')// Show the ball when data is available\n.attr('r',3).attr('fill','purple').attr('stroke','purple');// shows info about garph intersect\nvar frozenTooltip=d3.select(\"body\").append(\"div\").html(`Date: ${d3.timeFormat(\"%Y-%m-%d\")(closestData.date)}<br>Price: $${(_closestData3=closestData)===null||_closestData3===void 0?void 0:(_closestData3$price=_closestData3.price)===null||_closestData3$price===void 0?void 0:_closestData3$price.toFixed(2)}`).style(\"left\",`${e.pageX+10}px`).style(\"top\",`${e.pageY-20}px`).attr(\"class\",\"tooltip\").style(\"opacity\",1)// .style(\"left\", `${e.pageX + 10}px`)\n// .style(\"top\", `${e.pageY - 20}px`)\n.style(\"position\",\"absolute\").style(\"padding\",\"5px\").style(\"background\",\"pink\").style(\"color\",\"black\").style(\"border-radius\",\"3px\");// const [mouseX, mouseY] = d3.pointer(e);\n// const dateAtMouse = x.invert(mouseX);\n// const closestData = findClosestDataPoint(stockData, dateAtMouse);\n/* see if you can copy the old one instead of making a new one*/// Create a frozen tooltip at the clicked position\n// const frozenTooltip = svg.append('g')\n//     .attr('class', 'frozen-tooltip');\n// frozenTooltip.append('circle') // Optional circle background\n//     .attr('x', mouseX) // Use mouseX for horizontal position\n//     .attr('y', mouseY) // Use mouseY for vertical position\n//     .attr('r', 4)\n//     .attr('fill', 'blue');\n// // Use the closest data point's date and price but set position based on mouseY\n// frozenTooltip.append('text')\n//     .attr('x', mouseX + 10) // Offset for visibility\n//     .attr('y', mouseY - 10) // Offset for visibility\n//     .style(\"background\", \"rgba(0, 0, 0, 0.7)\")\n//     .text(closestData ? `Date: ${closestData.date.toLocaleDateString()}, Price: $${closestData.price.toFixed(2)}` : 'No Data')\n//     .attr('fill', 'white');\n});};function formatAsCurrency(amount){return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:2,maximumFractionDigits:2}).format(amount);}// Function to calculate profit\nconst calculateProfit=()=>{if(stockData.length===0)return;// Assuming stockData[0].price is the initial price and stockData[stockData.length - 1].price is the final price\nconst initialPrice=stockData[0].price;const shares=purchaseAmount/initialPrice;const finalPrice=stockData[stockData.length-1].price;const profitAmount=(shares*finalPrice-shares*initialPrice).toFixed(2);setProfit(formatAsCurrency(profitAmount));};const fetchEarliestDate=async()=>{try{const response=await axios.get(`http://localhost:5000/api/earliest-date?symbol=${debouncedStock}`);const newEarliestDate=formatDateString(response.data.earliestDate);setEarliestDate(newEarliestDate);if(new Date(newEarliestDate)>new Date(startDate)){setStartDate(newEarliestDate);}// Update endDate if it's earlier than the new earliest date\nif(new Date(endDate)<new Date(newEarliestDate)){setEndDate(today);// Reset endDate to today\n}}catch(error){console.error('Error fetching earliest date:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Stock Investment Graph\"}),\"Earliest date:\",earliestDate,/*#__PURE__*/_jsx(\"br\",{}),\"Start date:\",startDate,/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Stock:\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start:\"}),/*#__PURE__*/_jsx(\"th\",{children:\"End:\"}),/*#__PURE__*/_jsx(\"th\",{colSpan:\"100%\",children:\"Purchase Amount:\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Stock Symbol\",value:stock,onChange:e=>setStock(e.target.value)})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",max:today,min:earliestDate?new Date(earliestDate).toISOString().split('T')[0]:'',value:startDate,onChange:e=>{const selectedDate=e.target.value;if(new Date(selectedDate)>=new Date(earliestDate)&&new Date(selectedDate)<=new Date(today)){setStartDate(selectedDate);}}})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",max:today,min:earliestDate?new Date(earliestDate).toISOString().split('T')[0]:'',value:endDate,onChange:e=>{const selectedDate=e.target.value;if(new Date(selectedDate)>=new Date(earliestDate)&&new Date(selectedDate)<=new Date(today)){setEndDate(selectedDate);}}})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:purchaseAmount,onChange:e=>setPurchaseAmount(e.target.value),placeholder:\"Purchase Amount in USD\"})})}),/*#__PURE__*/_jsx(\"td\",{})]})})]})}),/*#__PURE__*/_jsx(\"svg\",{ref:svgRef}),\" \",/*#__PURE__*/_jsxs(\"h2\",{children:[\"Profit: \",profit]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"pre\",{children:formattedStockData})]});};export default StockGraph;","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","axios","useDebounce","jsx","_jsx","jsxs","_jsxs","StockGraph","stock","setStock","debouncedStock","startDate","setStartDate","endDate","setEndDate","profit","setProfit","purchaseAmount","setPurchaseAmount","stockData","setStockData","loading","setLoading","error","setError","earliestDate","setEarliestDate","today","Date","toISOString","split","formattedStockData","setFormattedStockData","svgRef","JSON","stringify","fetchEarliestDate","fetchStockData","length","drawGraph","formatDateString","dateString","match","url","response","fetch","ok","Error","result","json","previousPrice","map","item","date","timestamp","price","calculateProfit","err","message","findClosestDataPoint","dateAtMouse","left","right","mid","Math","floor","midDate","getTime","margin","top","bottom","width","height","select","current","selectAll","remove","svg","attr","append","closestData","handleMousemove","e","mouseX","pointer","x","invert","_closestData","_closestData2","_closestData2$price","trackerLine","style","ball","y","undefined","console","log","tooltip","html","timeFormat","toFixed","pageX","pageY","on","scaleTime","domain","extent","d","range","scaleLinear","max","call","axisBottom","axisLeft","line","datum","_closestData3","_closestData3$price","frozenTrackerLine","frozenBall","frozenTooltip","formatAsCurrency","amount","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","format","initialPrice","shares","finalPrice","profitAmount","get","newEarliestDate","data","children","colSpan","type","placeholder","value","onChange","target","min","selectedDate","ref"],"sources":["/Users/ahmadomar/stocks/frontend/src/components/stockGraph.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport axios from 'axios';\n\nimport useDebounce from './../hooks/useDebounce';\n\nconst StockGraph = () => {\n    const [stock, setStock] = useState('ANF'); \n    const debouncedStock = useDebounce(stock, 500);\n    // const [startDate, setStartDate] = useState('2024-10-15'); // default start date\n    const [startDate, setStartDate] = useState('1900-01-01'); // default start date\n    const [endDate, setEndDate] = useState('2024-10-16'); // default end date\n    const [profit, setProfit] = useState(null);\n    const [purchaseAmount, setPurchaseAmount] = useState(100); // default purchase amount $100\n    const [stockData, setStockData] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [earliestDate, setEarliestDate] = useState('');\n    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD\n    const [formattedStockData, setFormattedStockData] = useState('');\n\n    const svgRef = useRef(); // rerender graph everytime svg is changed\n\n    useEffect(() => {\n        setFormattedStockData(JSON.stringify(stockData, null, 2)); // 2 spaces for pretty printing\n    }, [stockData]);\n\n    useEffect(() => {\n        fetchEarliestDate();\n    }, [debouncedStock]);\n\n    useEffect(() => {\n        if (debouncedStock && startDate && endDate) {\n            fetchStockData();\n        }\n    }, [debouncedStock, startDate, endDate, purchaseAmount]);\n\n    useEffect(() => {\n        if (stockData.length) {\n            drawGraph();\n        }\n    }, [stockData]);\n\n    function formatDateString(dateString){\n        const match = dateString.match(/^(\\d{4}-\\d{2}-\\d{2})/); // YYYY-MM-DD\n        return match ? match[1] : '';\n    }\n\n    const fetchStockData = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const url = `http://localhost:5000/api/stocks?stock=${debouncedStock}&startDate=${startDate}&endDate=${endDate}`;\n            const response = await fetch(url);\n            if (!response.ok) throw new Error('Network response was not ok');\n            const result = await response.json();\n\n            let previousPrice = null; // used whenever price comes back as null\n            const formattedStockData = result.map(item => {\n                const date = new Date(item.timestamp * 1000);\n                const price = item.price !== null ? item.price : previousPrice; // most recent known price\n                previousPrice = price;\n                return { date, price };\n            });\n            setStockData(formattedStockData);\n            calculateProfit(formattedStockData);\n        } catch (err) {\n            setError(err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // returns data point closest to mouse\n    const findClosestDataPoint = (stockData, dateAtMouse) => {\n        // binary search to find this faster\n        var left = 0;\n        var right = stockData.length-1;\n        while(left < right){\n            var mid = Math.floor((right+left)/2);\n            var midDate = stockData[mid].date;\n            if(midDate.getTime() == dateAtMouse.getTime()) break;\n            if(midDate < dateAtMouse){\n                left = mid+1;\n            }else{\n                right = mid-1;\n            }\n        }\n        return stockData[mid];\n    }\n\n    const drawGraph = () => {\n        // dimensions for graph\n        const margin = { top: 20, right: 30, bottom: 40, left: 40 };\n        const width = 800 - margin.left - margin.right;\n        const height = 400 - margin.top - margin.bottom;\n\n        // remove old graph\n        d3.select(svgRef.current).selectAll('*').remove();\n\n        // create new graph\n        const svg = d3.select(svgRef.current)\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform', `translate(${margin.left},${margin.top})`);\n\n\n        // const zoom = d3.zoom()\n        //     .scaleExtent([1,10])\n        //     .extent([0,0],[width,height])\n        //     .translateExtent([[0,0],[width,height]])\n        //     .on('zoom',zoomed);\n\n        // svg.append('defs').append('clipPath')\n        //     .attr('id','clip')\n        //     .append('rect')\n        //     .attr('width',width)\n        //     .attr('height',height);\n\n        // svg.call(zoom);\n\n        // function zoomed(e){\n        //     const newXScale = e.transform.rescaleX(x);\n        //     const newYScale = e.transform.rescaleY(y);\n\n        //     svg.select('.line')\n        //         .attr('d', d3.line()\n        //                 .x(d => newXScale(d.date))\n        //                 .y(d => newYScale(d.date))\n        //         )\n\n        //     svg.select('.x-axis').call(d3.axisBottom(newXScale))\n        //     svg.select('.y-axis').call(d3.axisLeft(newYScale))\n        // }\n\n        // svg.on('wheel', (e)=>{\n        //     e.preventDefault();\n        //     const scaleFactor = e.deltaY > 0 ? 1.1 : .9;\n        //     svg.transition().call(zoom.scaleBy, scaleFactor);\n        // });\n        let closestData;\n        const handleMousemove = (e) => {\n            const [mouseX] = d3.pointer(e);\n            const dateAtMouse = x.invert(mouseX);\n            closestData = findClosestDataPoint(stockData,dateAtMouse);\n            if(closestData){\n                trackerLine\n                    .attr('stroke','steelblue')\n                    .attr('stroke-width',1)\n                    .attr(\"x1\", x(closestData.date))\n                    .attr(\"x2\", x(closestData.date))\n                    .attr(\"y1\", 0)\n                    .attr(\"y2\", height)\n                    .style(\"opacity\", 1);\n    \n                // Update ball position to match the closest data point\n                ball\n                    .attr('cx', x(closestData.date))\n                    .attr('cy', y(closestData.price))\n                    .attr('visibility', 'visible'); // Show the ball when data is available\n                if(closestData?.price == undefined) console.log('closestData',closestData)\n\n                // Update tooltip\n                tooltip\n                    .html(`Date: ${d3.timeFormat(\"%Y-%m-%d\")(closestData.date)}<br>Price: $${closestData?.price?.toFixed(2)}`)\n                    .style(\"opacity\", 1)\n                    .style(\"left\", `${e.pageX + 10}px`)\n                    .style(\"top\", `${e.pageY - 20}px`);\n            }\n        };\n\n        // const handleMouseout = (e) => {\n        //     setTimeout( () => {\n        //         tooltip.style('opacity',0)\n        //         trackerLine.style('opacity',0)\n        //     },200)\n        // };\n\n        // invisible rectangle for detecting mouseover event\n        svg.append('rect')\n            .attr('width', width)\n            .attr('height', height)\n            .style('fill', 'none')\n            .style('pointer-events', 'all');\n        svg.on('mousemove', handleMousemove)\n        svg.on('mouseout',()=>{\n            trackerLine.style('opacity',0);\n            tooltip.style('opacity',0);\n            ball.style('opacity',0);\n        })\n            // .on('mouseout', handleMouseout)\n\n        const x = d3.scaleTime()\n            .domain(d3.extent(stockData, d => d.date))\n            .range([0, width]);\n\n        const y = d3.scaleLinear()\n            .domain([0, d3.max(stockData, d => d.price)])\n            .range([height, 0]);\n\n        // Add the axes\n        svg.append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', `translate(0,${height})`)\n            .call(d3.axisBottom(x));\n            // .call(d3.axisBottom(x).tickFormat(d3.timeFormat(\"%Y-%m-%d\")));\n\n        svg.append('g')\n            .attr('class', 'y-axis')\n            .call(d3.axisLeft(y));\n\n        // maps x and y access to date and price attributes\n        const line = d3.line()\n            .x(d => x(d.date))\n            .y(d => y(d.price));\n\n        svg.append('path')\n            .datum(stockData) // plugs in data\n            .attr('fill', 'none')\n            .attr('stroke', 'steelblue')\n            .attr('stroke-width', 1.5)\n            .attr('d', line);\n\n        // svg.append('g')\n        //     .attr('clip-path','url(#clipPath)')\n        //     .append('path')\n        //     .datum('stockData')\n        //     .attr('class','line')\n        //     .attr('d',line);\n\n        const trackerLine = svg.append('line')\n            .attr('stroke','steelblue')\n            .attr('stroke-width',1)\n            .attr('y1', 0)\n            .attr('y2', height)\n            .style(\"opacity\", 1);\n\n        // lil ball on the line to show where it intersects the tracker\n        const ball = svg.append('circle')\n            .attr('r', 3)\n            .attr('fill', 'steelblue')\n            .attr('stroke', 'steelblue');\n\n        // shows info about garph intersect\n        const tooltip = d3.select(\"body\").append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0)\n            .style(\"position\", \"absolute\")\n            .style(\"padding\", \"5px\")\n            .style(\"background\", \"rgba(0, 0, 0, 0.7)\")\n            .style(\"color\", \"white\")\n            .style(\"border-radius\", \"3px\");\n\n\n        svg.on('click', function(e) {\n            console.log('closestData',closestData);\n            // console.log('trackerLine',trackerLine)\n            var frozenTrackerLine = svg.append('line')\n                .attr('stroke','purple')\n                .attr('stroke-width',1)\n                .attr('x1', x(closestData.date))\n                .attr('x2', x(closestData.date))\n                .attr('y1', 0)\n                .attr('y2', height)\n                .style(\"opacity\", 1);\n            \n            // lil ball on the line to show where it intersects the tracker\n            var frozenBall = svg.append('circle')\n                .attr('cx', x(closestData.date))\n                .attr('cy', y(closestData.price))\n                .attr('visibility', 'visible') // Show the ball when data is available\n                .attr('r', 3)\n                .attr('fill', 'purple')\n                .attr('stroke', 'purple');\n\n            // shows info about garph intersect\n            var frozenTooltip = d3.select(\"body\").append(\"div\")\n                .html(`Date: ${d3.timeFormat(\"%Y-%m-%d\")(closestData.date)}<br>Price: $${closestData?.price?.toFixed(2)}`)\n                .style(\"left\", `${e.pageX + 10}px`)\n                .style(\"top\", `${e.pageY - 20}px`)\n                .attr(\"class\", \"tooltip\")\n                .style(\"opacity\", 1)\n                // .style(\"left\", `${e.pageX + 10}px`)\n                // .style(\"top\", `${e.pageY - 20}px`)\n                .style(\"position\", \"absolute\")\n                .style(\"padding\", \"5px\")\n                .style(\"background\", \"pink\")\n                .style(\"color\", \"black\")\n                .style(\"border-radius\", \"3px\");\n\n\n\n\n            // const [mouseX, mouseY] = d3.pointer(e);\n\n            // const dateAtMouse = x.invert(mouseX);\n            // const closestData = findClosestDataPoint(stockData, dateAtMouse);\n\n            /* see if you can copy the old one instead of making a new one*/\n            // Create a frozen tooltip at the clicked position\n            // const frozenTooltip = svg.append('g')\n            //     .attr('class', 'frozen-tooltip');\n\n            // frozenTooltip.append('circle') // Optional circle background\n            //     .attr('x', mouseX) // Use mouseX for horizontal position\n            //     .attr('y', mouseY) // Use mouseY for vertical position\n            //     .attr('r', 4)\n            //     .attr('fill', 'blue');\n\n            // // Use the closest data point's date and price but set position based on mouseY\n            // frozenTooltip.append('text')\n            //     .attr('x', mouseX + 10) // Offset for visibility\n            //     .attr('y', mouseY - 10) // Offset for visibility\n            //     .style(\"background\", \"rgba(0, 0, 0, 0.7)\")\n\n            //     .text(closestData ? `Date: ${closestData.date.toLocaleDateString()}, Price: $${closestData.price.toFixed(2)}` : 'No Data')\n            //     .attr('fill', 'white');\n        });\n    };\n\n    function formatAsCurrency(amount) {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        }).format(amount);\n    }\n\n    // Function to calculate profit\n    const calculateProfit = () => {\n        if (stockData.length === 0) return;\n\n        // Assuming stockData[0].price is the initial price and stockData[stockData.length - 1].price is the final price\n        const initialPrice = stockData[0].price;\n        const shares = (purchaseAmount/initialPrice);\n        const finalPrice = stockData[stockData.length - 1].price;\n        const profitAmount = ((shares*finalPrice) - (shares*initialPrice)).toFixed(2);\n        setProfit(formatAsCurrency(profitAmount));\n    };\n\n    const fetchEarliestDate = async () => {\n        try {\n            const response = await axios.get(`http://localhost:5000/api/earliest-date?symbol=${debouncedStock}`);\n            const newEarliestDate = formatDateString(response.data.earliestDate);\n            setEarliestDate(newEarliestDate);\n\n            if(new Date(newEarliestDate)>new Date(startDate)) {\n                setStartDate(newEarliestDate);\n            }\n\n            // Update endDate if it's earlier than the new earliest date\n            if (new Date(endDate) < new Date(newEarliestDate)) {\n                setEndDate(today); // Reset endDate to today\n            }\n        } catch (error) {\n            console.error('Error fetching earliest date:', error);\n        }\n    };\n\n    return (\n        <div>\n            <h1>Stock Investment Graph</h1>\n            Earliest date:{earliestDate}\n            <br/>\n            Start date:{startDate}\n            <form>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Stock:</th>\n                            <th>Start:</th>\n                            <th>End:</th>\n                            <th colSpan='100%'>Purchase Amount:</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Stock Symbol\"\n                                        value={stock}\n                                        onChange={(e) => setStock(e.target.value)}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"date\"\n                                        max={today}\n                                        min={earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : ''}\n                                        value={startDate}\n                                        onChange={(e) => {\n                                            const selectedDate = e.target.value;\n                                            if (new Date(selectedDate) >= new Date(earliestDate) && new Date(selectedDate) <= new Date(today)) {\n                                                setStartDate(selectedDate);\n                                            }\n                                        }}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"date\"\n                                        max={today}\n                                        min={earliestDate ? new Date(earliestDate).toISOString().split('T')[0] : ''}\n                                        value={endDate}\n                                        onChange={(e) => {\n                                            const selectedDate = e.target.value;\n                                            if (new Date(selectedDate) >= new Date(earliestDate) && new Date(selectedDate) <= new Date(today)) {\n                                                setEndDate(selectedDate);\n                                            }\n                                        }}\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                <label>\n                                    <input\n                                        type=\"number\"\n                                        value={purchaseAmount}\n                                        onChange={(e) => setPurchaseAmount(e.target.value)}\n                                        placeholder=\"Purchase Amount in USD\"\n                                    />\n                                </label>\n                            </td>\n                            <td>\n                                {/*<button type=\"submit\">Fetch Data</button>*/}\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </form>\n            <svg ref={svgRef}></svg> {/* SVG for D3 to draw on */}\n            <h2>Profit: {profit}</h2>\n            {loading && <p>Loading...</p>}\n            {error && <p>Error: {error}</p>}\n            <pre>{formattedStockData}</pre>\n        </div>\n    );\n};\n\nexport default StockGraph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}